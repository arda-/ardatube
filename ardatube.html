<!DOCTYPE html>
<html class="h-100 w-100">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1;"/>

<link rel="stylesheet" href="https://unpkg.com/tachyons@4.7.0/css/tachyons.min.css"/>

<style media="screen">

    #keyboard {
        max-width: 44rem;
        display: grid;
        grid-template-columns: repeat(48, 1fr);
        grid-template-rows: repeat(5, 3rem);
        grid-gap: 0.2rem;
        margin: auto;
    }

    .key {
        grid-column: span 4;
        border-radius: .25rem;
        text-align: center;
        /*display: flex;*/
        /*flex-flow: column;*/
        /*justify-content: center;*/
        padding-top: .3rem;
    }


    .arrowkey {
        grid-column: span 4;
    }


    #ArrowUp {
        grid-row: 4;
    }

    #ArrowUp, #ArrowDown {
        grid-column: 41 / span 4;
    }

    #ArrowLeft { grid-column: 37 / span 4; }
    #ArrowRight { grid-column: 45 / span 4; }


    #KeyQ { grid-column: 2 / span 4; }
    #KeyA { grid-column: 3 / span 4; }
    #KeyZ { grid-column: 4 / span 4; }
    #Slash { grid-column: 35 / span 4; }

    #Space { grid-column: 12 / span 20;}
    .row5 { grid-row: 5;}
    .row5 { grid-row: 5;}
    .row5 { grid-row: 5;}

    .gridspan3 { grid-column: span 3; }


    .desc { font-style: italic; font-weight: 900;}

    .activekey {
        transition: all 0.07s ease-in-out;
    }

    .activekey:hover {
        transform: scale(1.2);
        box-shadow: 0 .2rem .25rem rgba(0,0,0,0.1);
    }
    .activekey:active {
        transform: scale(1.1);
        box-shadow: 0 .2rem .25rem rgba(0,0,0,0.2);
    }

    .keydown {
        transition: 0s !important;
        transform: stcale(1) !important;
        box-shadow: inset 0 .1rem .5rem rgba(0,0,0,0.7) !important;
    }


    #heightRegulator {
        width: 100%;
        height: 56.25vw;
        max-height: 100%;
    }

    #widthRegulator {
        max-width: calc(16 / 9 * 100vh);
        height: 100%;
    }
}

</style>
<body class="sans-serif bg-near-black h-100 w-100" onload="">

    <div class="bg-navy">
        <div class="lh-copy ph4 pt1 pb3 fw4 light-gray mw7 center">
            <h1 class="f2 fw4 measure-wide">Hi there! Thanks for checking out <i class="fw7">ardatube</i>.</h1>
            <h3 class="fw4 measure-wide">Ardatube is an opinionated wrapper for YouTube, curing what I see as its main pain points:</h3>
            <ul class="lh-copy measure-wide">
                <li class="pb2">the video isn't <b>FULL WIDTH</b> on the page. c'mon youtube, why do you have such large padding?!</b></li>
                <li class="pb2">there are no keyboard controls for <b>video quality</b> or <b>playback speed</b></li>
                <li class="pb2">comments, descriptions, and other features are often distracting</li>
                <li class="pb2">the related videos have no quality indication (several browser extensions exist to solve this)</li>
            </ul>
            <h3 class="fw4 measure-wide"><i class="fw7">ardatube</i> aims to rectify this. Alas, it is still a work in progress--many of the features are not yet complete. </h3>
            <h3 class="fw4 measure-wide">For the full list of features in development, <a href="https://github.com/arda-/ardatube/issues" class="fw5 white">check out the issues page on github</a>; while you're here, play around and enjoy!</h3>
        </div>
    </div>


    <div class="white" id="heightRegulator">
        <div class="bg-green h4 center" id="widthRegulator">
            <div id="player"></div>
        </div>
    </div>





    <div id="overlay w-100 relative z-0">
        <div id="keyInfoBox" class="sans-serif near-white measure h4 center">
            <h3 class="fw4 avenir measure tc pa0 ma0 mt4">Here are the available keyboard shortcuts. Hover over a key for an explanation. Press the key, or click the on-screen key to see it in action.</h3>
        </div>

        <div id="keyboard" class="">
            <div    id="Digit1"
                    class="key activekey pointer bg-blue">
                <div>1</div>
                <div class="desc">10%</div>
            </div>
            <div id="Digit2" class="key activekey pointer bg-blue">
                 <div>2</div>
                <div class="desc">20%</div>
            </div>
            <div id="Digit3" class="key activekey pointer bg-blue">
                <div>3</div>
                <div class="desc">30%</div>
            </div>
            <div id="Digit4" class="key activekey pointer bg-blue">
                <div>4</div>
                <div class="desc">40%</div>
            </div>
            <div id="Digit5" class="key activekey pointer bg-blue">
                <div>5</div>
                <div class="desc">50%</div>
            </div>
            <div id="Digit6" class="key activekey pointer bg-blue">
                <div>6</div>
                <div class="desc">60%</div>
            </div>
            <div id="Digit7" class="key activekey pointer bg-blue">
                <div>7</div>
                <div class="desc">70%</div>
            </div>
            <div id="Digit8" class="key activekey pointer bg-blue">
                <div>8</div>
                <div class="desc">80%</div>
            </div>
            <div id="Digit9" class="key activekey pointer bg-blue">
                <div>9</div>
                <div class="desc">90%</div>
            </div>
            <div id="Digit0" class="key activekey pointer bg-blue">
                <div>0</div>
                <div class="desc">0%</div>
            </div>
            <div id="Minus" class="key activekey pointer bg-gold">
                <div class="desc">&minus;</div>
                <div class="desc">vol</div>
            </div>
            <div id="Equal" class="key activekey pointer bg-gold">
                <div class="desc">&plus;</div>
                <div class="desc">vol</div>
            </div>
            <div id="KeyQ" class="key activekey pointer bg-dark-red black">
                <div>Q</div>
                <div class="desc">quit</div>
            </div>
            <div id="KeyW" class="key bg-silver ">W</div>
            <div id="KeyE" class="key bg-silver ">E</div>
            <div id="KeyR" class="key bg-silver ">R</div>
            <div id="KeyT" class="key bg-silver ">T</div>
            <div id="KeyY" class="key bg-silver ">Y</div>
            <div id="KeyU" class="key bg-silver ">U</div>
            <div id="KeyI" class="key bg-silver ">I</div>
            <div id="KeyO" class="key bg-silver ">O</div>
            <div id="KeyP" class="key bg-silver ">P</div>
            <div id="BracketLeft" class="key bg-silver gridspan3">[</div>
            <div id="BracketRight" class="key bg-silver gridspan3">]</div>
            <div id="KeyA" class="key bg-silver ">A</div>

            <div id="KeyS" class="key activekey pointer bg-light-green">
                <div>S</div>
                <div class="desc">src</div>
            </div>
            <div id="KeyD" class="key bg-silver ">D</div>
            <div id="KeyF" class="key activekey pointer bg-light-pink">
                <div>F</div>
                <div class="desc">full</div>
            </div>
            <div id="KeyG" class="key pointer bg-silver ">G</div>
            <div id="KeyH" class="key activekey pointer bg-blue">
                <div>H</div>
                <div class="desc">-30s</div>
            </div>
            <div id="KeyJ" class="key activekey pointer bg-blue">
                <div>J</div>
                <div class="desc">-10s</div>
            </div>
            <div id="KeyK" class="key activekey pointer bg-light-blue">
                <div>K</div>
                <div class="fw9">&#9654;/ &#x2759;&#x2759;</div>
                </div>
            <div id="KeyL" class="key activekey pointer bg-blue">
                <div>L</div>
                <div class="desc">+10s</div>
            </div>
            <div id="Semicolon" class="key activekey pointer bg-blue">
                <div>;</div>
                <div class="desc">+30s</div>
            </div>
            <div id="Quote" class="key pointer bg-silver gridspan3">'</div>
            <div id="KeyZ" class="key pointer bg-silver ">Z</div>
            <div id="KeyX" class="key pointer bg-silver ">X</div>
            <div id="KeyC" class="key pointer bg-silver ">C</div>
            <div id="KeyV" class="key pointer bg-silver ">V</div>
            <div id="KeyB" class="key activekey pointer bg-light-purple">
                <div>B</div>
                <div class="desc">prev</div>
            </div>
            <div id="KeyN" class="key activekey pointer bg-light-purple">
                <div>N</div>
                <div class="desc">next</div>
            </div>
            <div id="KeyM" class="key activekey pointer bg-gold">
                <div>M</div>
                <div class="desc">mute</div>
            </div>
            <div id="Slash" class="key activekey pointer bg-orange">
                <div>?</div>
                <div class="desc">help</div>
            </div>
            <div id="ArrowUp" class="key activekey pointer bg-pink arrowkey">
                <div>&#9650;</div>
                <div class="desc">qual</div>
            </div>
            <div    id="Space"
                    class="key activekey pointer bg-light-blue row5">
                <div>space</div>
                <div class="fw9">&#9654;/ &#x2759;&#x2759;</div>
            </div>
            <div id="ArrowLeft" class="key activekey pointer bg-light-blue row5 arrowkey">
                <div>&#9664;</div>
                <div class="desc">slow</div>
            </div>
            <div id="ArrowDown" class="key activekey pointer bg-pink row5 arrowkey">
                <div>&#9660;</div>
                <div class="desc">qual</div>
            </div>
            <div id="ArrowRight" class="key activekey pointer bg-light-blue row5 arrowkey">
                <div>&#9654;</div>
                <div class="desc">ffw</div>
            </div>
        </div>
    </div>

    <script>

    // 2. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var sourceURL = "https://www.youtube.com/watch?v=M7lc1UVf-VE";
    var youtubeSourceTag = "M7lc1UVf-VE";
    var timeToStart = 0;



    // 3. This function creates an <iframe> (and YouTube player)
    //    after the API code downloads.
    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            videoId: 'M7lc1UVf-VE',
            playerVars: {
                'autoplay': 1,
                'controls': 1,
                'iv_load_policy': 3,
                'enablejsapi': 1,
                'disablekb':1, // disables keyboard
                'rel': 0, // disables showing related video
            },
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange,
                'onPlaybackQualityChange': onQualChange,
            },
            width: '100%',
            height: '100%',
        });
    }

    // 4. The API will call this function when the video player is ready.
    function onPlayerReady(event) {

    }



    // 5. The API calls this function when the player's state changes.
    //    The function indicates that when playing a video (state=1),
    //    the player should play for six seconds and then stop.
    var done = false;
    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
            setTimeout(stop, 610000);
            done = true;
        }
    }

    function onSpeedChange(event) {
        showFeedback("speed: " + player.getPlaybackRate() + "x");
    }

    function onQualChange(event) {
        showFeedback("vid quality: " + player.getPlaybackQuality());
    }

    // ==== playback functions ====
    function togglePlay() {
        var state = player.getPlayerState();
        console.log(state==1);
        switch (state) {
            case -1: case 0:
                showFeedback("play");
                skipTo(0);
                break;
            case 1: // playing
                showFeedback("pause");
                player.pauseVideo();
                break;
            case 2: // unstarted, stopped, or paused
                showFeedback("play");
                player.playVideo();
                break;
            default:
        }
    }

    function skip(delta) {
        player.seekTo(player.getCurrentTime() + delta, true);
        showFeedback("skip " + delta + " s");
    }

    function skipTo(intFromZeroToTen) {
        player.seekTo(intFromZeroToTen * (player.getDuration() / 10));
        showFeedback("skip to " + intFromZeroToTen + "/10 of video");
    }

    function speedUp() {
        var rates = player.getAvailablePlaybackRates();
        if ( rates.length > 1) {
            var currentSpeed = player.getPlaybackRate();
            var currentSpeedIndex = rates.indexOf(currentSpeed);

            var maxSpeedIndex = rates.length - 1;
            if (currentSpeedIndex != maxSpeedIndex) {
                var newPlaybackRate = rates[currentSpeedIndex + 1];
                player.setPlaybackRate(newPlaybackRate);
                // showFeedback("speed: " + newPlaybackRate + "x");
                // ^^^ the above occurs in the onSpeechChange function instead,
                // according to YouTube's API recommendations
                // https://developers.google.com/youtube/iframe_api_reference#onPlaybackRateChange
            } else {
                showFeedback("can't go faster than speed: " + currentSpeed + "x");
            }


        } else {
            showFeedback("video does not allow ffw");
        }
    }

    function slowDown() {
        var rates = player.getAvailablePlaybackRates();
        if ( rates.length > 1) {
            var currentSpeed = player.getPlaybackRate();
            var currentSpeedIndex = rates.indexOf(currentSpeed);

            var maxSpeedIndex = rates.length - 1;
            if (currentSpeedIndex != 0) {
                var newPlaybackRate = rates[currentSpeedIndex - 1];
                player.setPlaybackRate(newPlaybackRate);
                // showFeedback("speed: " + newPlaybackRate + "x");
                // ^^^ the above occurs in the onSpeechChange function instead,
                // according to YouTube's API recommendations
                // https://developers.google.com/youtube/iframe_api_reference#onPlaybackRateChange
            } else {
                showFeedback("can't go slower than speed: " + currentSpeed + "x");
            }


        } else {
            showFeedback("video does not allow slow playback");
        }
    }

    // ==== volume functions ====
    function toggleMute() {
        switch (player.isMuted()) {
            case true: // playing
                showFeedback("m = unmute");
                player.unMute();
                break;
            case false: // paused
                showFeedback("m = mute");
                player.mute();
                player.setVolume(0);
                break;
            default:
        }
    }

    function volumeUp() {
        if (player.isMuted()) {
            player.unMute();
            player.setVolume(20);
            showFeedback("Vol = 20");
            return;
        }

        var vol = player.getVolume();
        if ( vol < 100) {
            vol += 20;
            player.setVolume(vol);
        }
        showFeedback("Vol = " + vol);
    }

    function volumeDown() {
        if (player.isMuted()) {
            showFeedback("Vol = 0");
            return;
        }

        var vol = player.getVolume();
        if ( vol > 0) {
            vol -= 20;
            player.setVolume(vol);
        }
        showFeedback("Vol = " + vol);
    }



    // ==== quality functions ====
    function qualityUp() {
        var qualities = player.getAvailableQualityLevels();
        if ( qualities.length > 1) {
            var curQual = player.getPlaybackQuality();
            var curQualIndex = qualities.indexOf(curQual);

            if (curQualIndex != 0) {
                var newQual = qualities[curQualIndex - 1];
                player.setPlaybackQuality(newQual);
            } else {
                showFeedback("no higher quality than: " + curQual);
            }


        } else {
            showFeedback("this is the only video quality available");
        }
    }

    function qualityDown() {
        var qualities = player.getAvailableQualityLevels();
        if ( qualities.length > 1) {
            var curQual = player.getPlaybackQuality();
            var curQualIndex = qualities.indexOf(curQual);
            var minQualIndex = qualities.length - 2;

            if (curQualIndex != minQualIndex) {
                var newQual = qualities[curQualIndex + 1];
                player.setPlaybackQuality(newQual);
            } else {
                showFeedback("no lower quality than: " + curQual);
            }

        } else {
            showFeedback("this is the only video quality available");
        }
    }

    // ==== OTHER FUNCTIONS

    function showKeyInfo(key) {
        var entry = activeKeyMap[key]
        if (entry == undefined) {
            console.log("couldn't find "+key+" in activeKeyMap.")
        } else {
            renderKeyInfoBlurb(entry.char, entry.name, entry.blurb);
        }
    }

    function renderKeyInfoBlurb(key, name, blurb) {
        element = document.getElementById('keyInfoBox');
        previousBlurb = document.getElementById('keyInfoContent');
        if (previousBlurb != undefined) removeKeyInfo();

        if (key == "K" || key == "space") {
            var htmlstr =
                '<p class="lh-copy measure center" id="keyInfoContent">'
                + key + ' :  <span class="fw9">'
                + name + '</span><br>'
                + blurb + '</p></div>';
        } else {
            var htmlstr =
                '<p class="lh-copy measure center" id="keyInfoContent">'
                + key + ' :  <i class="fw9">'
                + name + '</i><br>'
                + blurb + '</p></div>';
        }
        element.insertAdjacentHTML('beforeend',htmlstr);
    }

    function removeKeyInfo() {
        keyInfoBox = document.getElementById('keyInfoBox');
        keyInfoContent = document.getElementById('keyInfoContent');
        keyInfoBox.removeChild(keyInfoContent);
    }

    // ==== feedback helper functions ====
    function showFeedback(message) {
        element = document.getElementById('feedbackDiv');
        if (element) removeFeedback();
        var htmlstr =
            "<div id='feedbackDiv' class='dib white bg-black-50 sans-serif pa1 br2'>"
            + message +
            "</div>";
        document.body.insertAdjacentHTML('beforeend',htmlstr);
        setTimeout(removeFeedback, 700);
    }
    function removeFeedback() {
        element = document.getElementById('feedbackDiv');
        document.body.removeChild(element);
    }

    function goToSource() {
        window.open(sourceURL, "_self");
    }

    // ==== key mappings objects =====

    var activeKeyMap = {
        'Digit1': {
            'char': "1",
            'name':  "10%",
            'blurb': "skip to 10% in the video.",
        },
        'Digit2': {
            'char': "2",
            'name':  "20%",
            'blurb': "skip to 20% in the video.",
        },
        'Digit3': {
            'char': "3",
            'name':  "30%",
            'blurb': "skip to 30% in the video.",
        },
        'Digit4': {
            'char': "4",
            'name':  "40%",
            'blurb': "skip to 40% in the video.",
        },
        'Digit5': {
            'char': "5",
            'name':  "50%",
            'blurb': "skip to 50% in the video.",
        },
        'Digit6': {
            'char': "6",
            'name':  "60%",
            'blurb': "skip to 60% in the video.",
        },
        'Digit7': {
            'char': "7",
            'name':  "70%",
            'blurb': "skip to 70% in the video.",
        },
        'Digit8': {
            'char': "8",
            'name':  "80%",
            'blurb': "skip to 80% in the video.",
        },
        'Digit9': {
            'char': "9",
            'name':  "90%",
            'blurb': "skip to 90% in the video.",
        },
        'Digit0': {
            'char': "0",
            'name':  "0%",
            'blurb': "skip to beginning (seek to 0% in the video).",
        },
        'Minus': {
            'char': "<b>&minus;</b>",
            'name':  "volume down",
            'blurb': "decrease volume by 20%",
        },
        'Equal': {
            'char': "<b>&plus;</b>",
            'name':  "volume up",
            'blurb': "increase volume by 20%",
        },
        'KeyQ': {
            'char': "Q",
            'name':  "quit video",
            'blurb': "stops the video and disables playback.",
        },
        'KeyS': {
            'char': "S",
            'name':  "source",
            'blurb': "redirect to the original video.",
        },
        'KeyF': {
            'char': "F",
            'name':  "fulscreen toggle",
            'blurb': "enter or exit fullscreen mode.",
        },
        'KeyH': {
            'char': "H",
            'name':  "-30s",
            'blurb': "seek back 30 seconds in the video, if possible.",
        },
        'KeyJ': {
            'char': "J",
            'name':  "-10s",
            'blurb': "seek back 10 seconds in the video, if possible.",
        },
        'KeyK': {
            'char': "K",
            'name':  "&#9654;/ &#x2759;&#x2759;",
            'blurb': "toggle playback of video.",
        },
        'KeyL': {
            'char': "L",
            'name':  "+10s",
            'blurb': "seek forward 10 seconds in the video, if possible.",
        },
        "Semicolon": {
            'char': "<b>;</b>",
            'name':  "+30s",
            'blurb': "seek forward 30 seconds in the video, if possible.",
        },
        'KeyB': {
            'char': "B",
            'name':  "previous video",
            'blurb': "if you've added videos to the ardatube queue, skip to the previous video in the KeyB.",

        },
        'KeyN': {
            'char': "N",
            'name':  "next video",
            'blurb': "if you've added videos to the ardatube queue, skip to the next video in the queue.",
        },
        'KeyM': {
            'char': "M",
            'name':  "mute toggle",
            'blurb': "mute or unmute the volume.",
        },
        'Slash': {
            'char': '?',
            'name':  "help toggle",
            'blurb': "mute or unmute the volume.",
        },
        "ArrowUp": {
            'char': "&#9650;",
            'name':  "quality up",
            'blurb': "increase the resolution of the video, if available.",
        },
        "ArrowDown": {
            'char': "&#9660;",
            'name':  "quality down",
            'blurb': "decrease the resolution of the video, if available.",
        },
        "Space": {
            'char': "space",
            'name':  "&#9654;/ &#x2759;&#x2759;",
            'blurb': "toggle playback of video.",
        },
        "ArrowLeft": {
            'char': "&#9664;",
            'name': "slow down",
            'blurb': "slow the playback speed of the video, if possible.",
        },
        "ArrowRight": {
            'char': "&#9664;",
            'name': "fast forward",
            'blurb': "slow the playback speed of the video, if possible.",
        }
    }
    var allKeyArray = [
        "Digit1",
        "Digit2",
        "Digit3",
        "Digit4",
        "Digit5",
        "Digit6",
        "Digit7",
        "Digit8",
        "Digit9",
        "Digit0",
        "Minus",
        "Equal", //plus
        "KeyQ",
        "KeyW",
        "KeyE",
        "KeyR",
        "KeyT",
        "KeyY",
        "KeyU",
        "KeyI",
        "KeyO",
        "KeyP",
        "BracketLeft",
        "BracketRight",
        "KeyA",
        "KeyS",
        "KeyD",
        "KeyF",
        "KeyG",
        "KeyH",
        "KeyJ",
        "KeyK",
        "KeyL",
        "Semicolon",
        "Quote",
        "KeyZ",
        "KeyX",
        "KeyC",
        "KeyV",
        "KeyB",
        "KeyN",
        "KeyM",
        "Slash", //question
        "Space",
        "ArrowUp",
        "ArrowDown",
        "ArrowLeft",
        "ArrowRight",
    ]
    var activeKeyArray = [
        "Digit1",
        "Digit2",
        "Digit3",
        "Digit4",
        "Digit5",
        "Digit6",
        "Digit7",
        "Digit8",
        "Digit9",
        "Digit0",
        "Minus",
        "Equal", //plus
        "KeyQ",
        // mind the gap
        "KeyS",
        //
        "KeyF",
        //
        "KeyH",
        "KeyJ",
        "KeyK",
        "KeyL",
        "Semicolon",
        // mind the gap
        "KeyB",
        "KeyN",
        "KeyM",
        "Slash", //question
        "Space",
        "ArrowUp",
        "ArrowDown",
        "ArrowLeft",
        "ArrowRight",
    ]

    var DEBUG = true;
    function debugPrint(x) {
        if (DEBUG) console.log(x);
    }

    window.addEventListener("load", init);

    function init() {
        initKeys()
    }

    function initKeys() {
        for (var i = 0; i < activeKeyArray.length; i++) {
            addEventListeners(activeKeyArray[i]);
        }
    }

    // GUI mouse related listeners
    function addEventListeners(element) {
        keyNode = document.getElementById(element)

        keyNode.onmouseover = function() {
            showKeyInfo(element);
        }
        keyNode.onmouseleave = function() {
            removeKeyInfo();
        }

        keyNode.onclick = function() {
            keyAction(element);
        }
    };


    // keyboard-related listeners
    window.addEventListener("keydown", function(event) {
        let str = "KeyboardEvent: key='" + event.key + "' | code='" +
                event.code + "'";
        console.log(str);
        console.log("KEYDOWN " + str);

        if (allKeyArray.includes(event.code)) {

            switch (event.code) {
                case "ArrowUp":
                    event.preventDefault();
                    break;
                case "ArrowDown":
                    event.preventDefault();
                    break;
                case "ArrowRight":
                    event.preventDefault();
                    break;
                case "ArrowLeft":
                    event.preventDefault();
                    break;
                case "Space":
                    event.preventDefault();
                    break;
                default:
            }

            addKeydown(event.code);
            keyAction(event.code);
        }

    }, true);

    window.addEventListener("keyup", function(event) {
        let str = "KeyboardEvent: key='" + event.key + "' | code='" +
                event.code + "'";
        console.log("KEYUP " + str);

        if (allKeyArray.includes(event.code)) {
            removeKeydown(event.code);
        }

    }, true);



    document.onkeydown = function(e) {
        e = e || window.event;
        var input = e.keyCode || e.which;
    }

    function addKeydown(keycode) {
        var key = document.getElementById(keycode);
        key.classList.add('keydown');
    }

    function removeKeydown(keycode) {
        var key = document.getElementById(keycode);
        key.classList.remove('keydown')
    }



    function keyAction(keycode) {
        switch (keycode) {

            // OTHER CHARS
            case "KeyQ":
                showFeedback("escape");
                player.stopVideo();
                break;
            case "Slash": // question
                // toggle keyboard overlay with help info
                break;

            case "KeyS": // question
                goToSource();
                break;



            // NUMBERS
            case "Digit0":
                skipTo(0);
                break;
            case "Digit1":
                skipTo(1);
                break;
            case "Digit2":
                skipTo(2);
                break;
            case "Digit3":
                skipTo(3);
                break;
            case "Digit4":
                skipTo(4);
                break;
            case "Digit5":
                skipTo(5);
                break;
            case "Digit6":
                skipTo(6);
                break;
            case "Digit7":
                skipTo(7);
                break;
            case "Digit8":
                skipTo(8);
                break;
            case "Digit9":
                skipTo(9);
                break;


            // PLAYBACK CONTROLS
            case "Space":
                togglePlay();
                break;

            case "KeyH":
                skip(-30);
                break;
            case "KeyJ":
                skip(-10);
                break;
            case "KeyK":
                togglePlay();
                break;
            case "KeyL":
                skip(10);
                break;
            case "Semicolon":
                skip(30);
                break;

            case "ArrowLeft":
                slowDown();
                break;
            case "ArrowRight":
                speedUp();
                break;



            // VOLUME CONTROLS
            case "KeyM":
                showFeedback("m = mute")
                toggleMute();
                break;
            case "Equals": // plus
                volumeUp();
                break;
            case "Minus":
                volumeDown();
                break;



            // QUALITY CONTROL
            case "ArrowUp":
                qualityUp();
                break;

            case "ArrowDown":
                qualityDown();
                break;



            default:
        }
    }

    </script>
</body>
</html>
